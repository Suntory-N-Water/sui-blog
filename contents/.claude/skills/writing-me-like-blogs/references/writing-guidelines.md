# 構造と表現のガイドライン

本書は記事の構成手法、見出しの使い方、技術説明の方法論を示す。

## 目次

- [標準的な構成パターン](#標準的な構成パターン)
- [見出しレベルの使い方](#見出しレベルの使い方)
- [導入部の書き方](#導入部の書き方)
- [結論部の書き方](#結論部の書き方)
- [技術説明の親切さ](#技術説明の親切さ)
- [対比による説明](#対比による説明)
- [メタファーと日常言語の活用](#メタファーと日常言語の活用)
- [試行錯誤の記録](#試行錯誤の記録)
- [その他の特徴](#その他の特徴)

---

## 標準的な構成パターン

すべての記事は以下の構造に従う：

### 4段階の構成

1. **導入(背景説明)**: 自分自身の経験や現実の課題から始まる
2. **問題提起**: 解決すべき技術的課題を明確化
3. **解決策の詳細**: 実装コード例付きで具体的に説明
4. **まとめ**: 学習ポイントをリストアップ

### 構成例

「やはり俺のPlaywrightはまちがっている。」記事の構成：

- **導入**: 生成AIとの開発、過去コード流用の合理性
- **問題**: `page.evaluate()` は動くが「正しく動く」のか？
- **解決**: `locator` の設計思想と Actionability Checks
- **まとめ**: 学んだこと6点のリスト

## 見出しレベルの使い方

### H2(##): 大きな章立て

記事の主要な構成要素を示す。

```markdown
## 認知負荷の高まりと文字情報の限界
## 図解は「記憶の定着装置」である
## AIを活用した図解機能の実装
## 図解のリスクとメリット
## まとめ
## 参考
```

### H3(###): 詳細内容を分割

H2の下位構造として、具体的な内容を分割する。

```markdown
## AIを活用した図解機能の実装
### 既存の記事をそのまま活用できるようにすること
### 生成AIを活用して、図解作成の工数をほぼゼロにすること
```

## 導入部の書き方

### 自分の経験から始まる

読者が共感しやすい個人的な経験を起点とする。

```
以前は外出先からでも気軽に記事を更新できるように設計していました。
本ブログでも紹介しましたが、このタイミングで実装しています。
```

```
私は過去プロジェクトのコードを流用していました。
Playwrightを使う際、動いていたテストコードをコピーして、今回のプロジェクト用に少し修正して使用します。
```

### 具体例から始まる

読者の関心を引く具体的な事例で導入する。

```
皆さんは、Google 製の IDE である「Antigravity」を使っていますか？
これは VS Code をフォークした AI エディタの 1 つです。
```

## 結論部の書き方

### 箇条書きによる学習ポイントのまとめ

記事で得られた知見を箇条書きで整理する。

```markdown
## まとめ

- 過去のコードを流用することは効率的で合理的な判断だが、「動く」と「正しく動く」の間には設計思想の違いがある
- `page.evaluate()` は動作するが、要素の操作可能性を確認しないため不安定なテストにつながる可能性がある
- `locator` は要素がクリック可能になるまで自動で待機し、Actionability Checks により安定性を向上させる
- `waitForNavigation()` は競合状態が発生する可能性があるため非推奨。`waitForURL()` や `waitForSelector()` を使うべき
- 公式ドキュメントには「なぜこの方法が推奨されるのか」という設計思想が書かれており、単なるAPIリファレンス以上の価値がある
- 日常的に使うツールについては、一度は腰を据えてドキュメントを読む価値がある
```

### 反省や今後の展望を含む締め

学習過程での反省や今後の展望を率直に述べる。

```
今回の移行は、「スマートフォンから更新できる」という当初の目的から、「生成 AI に執筆を補助してもらえる」ようにするための技術変更でした。
実際の運用を通じて、自分の執筆スタイルや学習方法を見つめ直す良い機会になりました。

スマートフォンからやるよりも、結局PCからやったほうがよいってことになった時点で、最初から設計や概念的な部分をちゃんと実装できていなかったことは反省です。
```

## 技術説明の親切さ

### 段階的な説明

複雑な概念を段階的に説明し、読者の理解を促進する。

```
locatorは「要素を特定するだけのしくみ」ではなく、要素が操作可能になるまで待つしくみを備えています。
これらのチェックがすべてパスしない限り、指定されたタイムアウト時間内で自動的にリトライを繰り返します。
```

### 用語の丁寧な説明

専門用語には注釈を付け、読者の理解を助ける。

```
`page.evaluate()` は、ブラウザコンテキスト[^ブラウザコンテキスト]内でJavaScriptコードを実行するためのメソッドです。
指定された関数は、ページ上で直接実行され、DOM要素にアクセスして操作を行います。

[^ブラウザコンテキスト]: ブラウザの実行環境のこと。ページ上でJavaScriptを直接実行する際の文脈を指します。
```

## 対比による説明

### NG例とOK例を並べて理解を促進

誤った実装と正しい実装を対比させ、理解を深める。

```typescript
// NG
const navigationPromise = page.waitForNavigation();
await page.click('button');
await navigationPromise;

// OK
await page.click('button');
await page.waitForURL('**/next-page');
// または特定の要素を待機
await page.waitForSelector('#next-page-element');
```

### 概念の対比

異なる概念を対比させ、その差異を明確にする。

```
一方、`page.locator().click()` は、PlaywrightのLocator APIを使用しています。
Locatorは、要素の位置を特定し、その**要素がインタラクティブであることを自動で確認**します。
これには、要素が表示されているか、クリック可能な状態であるかなどのチェックが含まれます。
```

## メタファーと日常言語の活用

### 読者に身近な例え

技術的な概念を日常的な経験に結びつける。

```
まず概要を把握し、メンタルモデルを作ってから本を読む。
そうすることで、「どんな内容が書かれているのか」が分かった状態で読み進めることができ、結果としてスムーズに理解できます。
```

### 心理学的概念の引用

学術的な概念を引用し、説得力を高める。

```
心理学では **decision fatigue(決断疲れ)** という概念が知られています。
判断を重ねることで集中力や判断の質が低下する可能性がある、というものです。
```

## 試行錯誤の記録

### 失敗から学んだプロセスを詳細に記述

失敗の経緯と学習過程を包み隠さず記述する。

```
本末転倒という言葉がありますが、そもそも高い頻度で記事を更新できていない状況で、スマートフォンから記事を書いたり文章を構成したりすることは難しい問題でした。
これは鶏が先か卵が先かのような状況です。
この実装を開始してから 1 週間後くらいには「あれ、頻度少ないし、PCからやるときに LINE からじゃないとPull Requestを発行しづらいし」で、結局あまり記事は書けませんでした。
```

### 現実的な判断の記述

技術的な判断の背景にある現実的な制約を明示する。

```
これはエンジニアとしての怠慢ではなく、プロジェクトの現実です。
開発にだけ没頭している時間は少ないこともあるため、その選択が間違っているとは思いません。
これを読んでいるあなたも、同じように考えているはずです。
```

## その他の特徴

### 外部リンクの充実

すべての記事の最後に「参考」セクションを設置し、外部リンクを記載する。

```markdown
## 参考

https://github.com/azukiazusa1/sapper-blog-app

https://azukiazusa.dev/
```

### コードブロックの使用

実装例を提示し、読者の理解を助ける。

```typescript
await page.evaluate(() => {
  document.querySelector('button.submit').click();
});
```